{%  extends "src/assets/templates/base_index.html" %}

{% block css %}
    <link href="/static/managesite/managesite.css" rel="stylesheet" type="text/css"/>
    <link href="/static/src/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" type="text/css"/>
    <link href="/static/src/bootstrap-select/css/bootstrap-select.min.css" rel="stylesheet" type="text/css"/>
{% endblock %}

{% block script %}
    <script src="/static/src/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js" type="text/javascript"></script>
    <script src="/static/src/bootstrap-datetimepicker/js/bootstrap-datetimepicker.zh-CN.js" type="text/javascript"></script>
    <script src="/static/src/bootstrap-select/js/bootstrap-select.min.js" type="text/javascript"></script>
    <script src="/static/src/bootstrap-select/js/defaults-zh_CN.min.js" type="text/javascript"></script>
    <script src="/static/managesite/managesite.js" type="text/javascript"></script>
{% endblock %}

{% block content %}
    <div>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#new_order_modal">
            <i class="fa fa-plus" aria-hidden="true"></i> 新建
        </button>
    </div>

    <div class="modal fade" id="new_order_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"><span
                            aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                    <h4 class="modal-title" id="myModalLabel">新建生产批次</h4>
                </div>
                <div class="modal-body">
                    <div id="step1-body">
                        <form class="form-horizontal" role="form">
                            <div class="form-group">
                                <label class="col-xs-2 control-label">产品过期时间</label>
                                <div class="col-xs-3">
                                    <input id="date_picker" size="16" type="text" value="" readonly class="form-control">
                                </div>
                            </div>
                            <div class="form-group">
                                {% include "managesite/brief/select_actions.html" with label_name="产品条码" label_id="barcode" options=barcode_options %}
                            </div>
                            <div class="form-group">
                                {% include "managesite/brief/select_actions.html" with label_name="激活工厂" label_id="factory" options=factory_options %}
                            </div>
                            <div class="form-group">
                                <label class="col-xs-2 control-label">生产数量</label>
                                <div class="col-xs-2">
                                    <label>
                                        <input id="box_count" class="form-control" type="number">
                                    </label>
                                </div>
                                <span class="col-xs-1 unit">万箱</span>
                                <span class="col-xs-1 unit"> X </span>
                                <div class="col-xs-2">
                                    <label>
                                        <input id="bottle_count" value="24" class="form-control" type="number">
                                    </label>
                                </div>
                                <span class="col-xs-1 unit">瓶/箱</span>
                            </div>
                            <div class="form-group">
                                <label class="col-xs-2 control-label">
                                    <input id="total_count_checkbox" type="checkbox">
                                    总瓶数</label>
                                <div class="col-xs-2">
                                    <label>
                                        <input id="total_count" disabled class="form-control" type="number">
                                    </label>
                                </div>
                                <span class="col-xs-2 unit">万瓶</span>
                            </div>

                            {% include "managesite/brief/checkbox_select_actions.html" with label_name="内码赋码工厂" label_id="inner_code" options=factory_options %}
                            {% include "managesite/brief/checkbox_select_actions.html" with label_name="外码赋码工厂" label_id="outer_code" options=factory_options %}
                            {% include "managesite/brief/checkbox_select_actions.html" with label_name="箱码赋码工厂" label_id="box_code" options=factory_options %}

                            <div class="form-group">
                                <label class="col-xs-2 control-label">产品信息</label>
                                <div class="col-xs-8">
                                    <textarea id="prod_info" class="form-control" rows="8"></textarea>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div id="step2-body" class="hidden">
                        <form class="form-horizontal" role="form">
                            <div id="batch_date" class="form-group">
                                <label class="col-xs-2 control-label"><b>产品过期时间</b></label>
                                <label class="col-xs-8 batch-value red-font">未设置</label>
                            </div>
                            <div id="batch_barcode" class="form-group">
                                <label class="col-xs-2 control-label"><b>产品条码</b></label>
                                <label class="col-xs-8 batch-value red-font">未设置</label>
                            </div>
                            <div id="batch_factory" class="form-group">
                                <label class="col-xs-2 control-label"><b>激活工厂</b></label>
                                <label class="col-xs-8 batch-value red-font">未设置</label>
                            </div>
                            <div id="batch_count" class="form-group">
                                <label class="col-xs-2 control-label"><b>生产数量</b></label>
                                <label class="col-xs-8 batch-value red-font">未设置</label>
                            </div>
                            <div id="batch_inner_code" class="form-group">
                                <label class="col-xs-2 control-label">内码赋码工厂</label>
                                <label class="col-xs-8 batch-value red-font">未设置</label>
                            </div>
                            <div id="batch_outer_code" class="form-group">
                                <label class="col-xs-2 control-label">外码赋码工厂</label>
                                <label class="col-xs-8 batch-value red-font">未设置</label>
                            </div>
                            <div id="batch_box_code" class="form-group">
                                <label class="col-xs-2 control-label">箱码赋码工厂</label>
                                <label class="col-xs-8 batch-value red-font">未设置</label>
                            </div>
                            <div id="batch_prod_info" class="form-group">
                                <label class="col-xs-2 control-label">产品信息</label>
                                <label class="col-xs-8 batch-value red-font">未设置</label>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="modal-footer">
                    <div id="step1-foot">
                        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                        <button id="make_order_btn" type="button" class="btn btn-primary">生成</button>
                    </div>
                    <div id="step2-foot" class="hidden">
                        <button id="back_btn" type="button" class="btn btn-default">返回修改</button>
                        <button id="confirm_btn" type="button" class="btn btn-primary">确认提交</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="panel-group" id="order_list" role="tablist" aria-multiselectable="true">
        {% for batch in batch_list %}
        {% include "managesite/brief/batch_list.html" with batch_id=batch.batch_id status=batch.status expired_time=batch.expired_time barcode=batch.barcode unit_count=batch.unit_count inner_code_factory=batch.inner_code_factory outer_code_factory=batch.outer_code_factory case_code_factory=batch.case_code_factory factory_id=batch.factory_id prod_info=batch.prod_info %}
        {% endfor %}
    </div>


{% endblock %}